# CLI Global Logging and Telemetry Toggles

## ðŸŽ¯ Objective

Deliver configurable global options on the `isoinspector` command that let operators control console logging verbosity and enable or disable emission of streaming telemetry metrics during CLI runs.

## ðŸ§© Context

- The master PRD lists `ISOInspectorCLI` as a deliverable alongside the app and core library, requiring the command-line interface to expose production-ready instrumentation and controls. [`ISOInspector_Master_PRD.md`](../AI/ISOViewer/ISOInspector_PRD_Full/ISOInspector_Master_PRD.md)
- Task D2 in the execution workplan finished the streaming `inspect` and `validate` subcommands and explicitly carries this follow-up to surface logging and telemetry toggles. [`04_TODO_Workplan.md`](../AI/ISOInspector_Execution_Guide/04_TODO_Workplan.md)
- `ISOInspectorCommand.GlobalOptions` currently contains a `@todo` marker for these toggles, confirming the option group is the intended hook for CLI-wide logging and telemetry configuration. [`ISOInspectorCommand.swift`](../../Sources/ISOInspectorCLI/ISOInspectorCommand.swift)

## âœ… Success Criteria

- New global flags (for example `--quiet/--verbose`, `--enable-telemetry/--disable-telemetry`) compile into the CLI and appear in the autogenerated help output.
- Selected options flow into the command context/environment so subcommands can adjust console printing and whether

  telemetry metrics are emitted.

- Unit or integration coverage verifies that toggling verbosity changes CLI output and that telemetry piping honors the

  opt-in/out controls.

- Documentation across CLI README/help and task trackers notes the availability of the new flags.

## ðŸ”§ Implementation Notes

- Extend `ISOInspectorCommand.GlobalOptions` with strongly typed properties for verbosity and telemetry mode, mapping to enum cases for clarity.
- Propagate parsed options through `ISOInspectorCommand.bootstrap` into `ISOInspectorCommandContext` so the environment can configure `EventConsoleFormatter`, logging sinks, and telemetry publishers before executing subcommands.
- Ensure defaults maintain existing behavior (standard logging, telemetry enabled) to keep CI smoke tests stable while

  adding coverage for both quiet and verbose paths.

- Update CLI help text snapshots or doc comments if the help formatter output changes, and document flag usage in

  Markdown guides if available.

## ðŸ“¦ Outcome

- Added global CLI flags `--quiet/--verbose` and `--enable-telemetry/--disable-telemetry`, with validation preventing

  conflicting selections. Options appear in generated help and map to strongly typed verbosity and telemetry modes.

- Updated `ISOInspectorCommand.bootstrap` to translate parsed options into `ISOInspectorCLIEnvironment` configuration,

  including muting standard output when quiet, prefixing verbose output, and toggling telemetry availability. Shared
  `ISOInspectorCommandContext` now records the resolved modes for downstream consumers.

- Extended `ISOInspectorCLIEnvironment` with explicit `logVerbosity` and `telemetryEnabled` properties so command

  implementations can branch on runtime configuration while retaining backward-compatible defaults.

- Added CLI unit coverage asserting bootstrap behavior, telemetry overrides, and validation for mutually exclusive

  flags. Tracked artifacts (`todo.md`, `DOCS/INPROGRESS/next_tasks.md`, and the execution workplan) updated to mark the
  puzzle complete.

## ðŸ§  Source References

- [`ISOInspector_Master_PRD.md`](../AI/ISOViewer/ISOInspector_PRD_Full/ISOInspector_Master_PRD.md)
- [`04_TODO_Workplan.md`](../AI/ISOInspector_Execution_Guide/04_TODO_Workplan.md)
- [`ISOInspector_PRD_TODO.md`](../AI/ISOViewer/ISOInspector_PRD_TODO.md)
- [`DOCS/RULES`](../RULES)
- [`DOCS/TASK_ARCHIVE`](../TASK_ARCHIVE)
